---
http_interactions:
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer fake_expired_token
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '105'
      Server:
      - Apache
      Date:
      - Fri, 19 Aug 2022 14:18:45 GMT
      Connection:
      - keep-alive
      Www-Authenticate:
      - Bearer realm="PSN"
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"error":{"referenceId":"d5b3eed4-1fc9-11ed-927a-6f852edc412a","code":2241025,"message":"Invalid
        token"}}'
  recorded_at: Fri, 19 Aug 2022 14:18:44 GMT
- request:
    method: get
    uri: https://ca.account.sony.com/api/authz/v3/oauth/authorize?access_type=offline&client_id=<PSN_CLIENT_ID>&redirect_uri=com.playstation.PlayStationApp://redirect&response_type=code&scope=psn:mobile.v1%20psn:clientapp
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Cookie:
      - npsso=<PSN_NPSSO>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 302
      message: Moved Temporarily
    headers:
      Server:
      - nginx
      Content-Length:
      - '0'
      X-Psn-Request-Id:
      - 0a6569bc4fabbe89925ad65c24dd08c0
      X-Psn-Correlation-Id:
      - f64d286f-370d-44bf-a271-d27c3746215d
      X-Requestid:
      - 0a6569bc4fabbe89925ad65c24dd08c0
      X-Correlationid:
      - f64d286f-370d-44bf-a271-d27c3746215d
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-cache, no-store, max-age=0, must-revalidate
      Expires:
      - '0'
      Location:
      - com.playstation.PlayStationApp://redirect/?code=v1.Ab23CD&cid=f64d286f-370d-44bf-a271-d27c3746215d
      Strict-Transport-Security:
      - max-age=31536000 ; includeSubDomains
      X-Xss-Protection:
      - 1; mode=block
      X-Frame-Options:
      - DENY
      Date:
      - Fri, 19 Aug 2022 14:18:45 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=D3422F4A8B3D4372CB38168F8F61710F~-1~YAAQkOEWAkGSF7GCAQAAlnx4tgi82U0VvvVpj5aQERrESA1tqqUkTj4niC9SaXwXqJ4vtoWTLuUBngx32ruRRBvCUJEgSmNV0SRFzbVkKO8stj4Y21JnepZ7KgUtJ6nrw5UxvJKOqtn2sb78SjjV1qOKXYYMjJZhWgg6VEGZQYeeUS6nFz9KuuO8gYKZcLU5x4G8vCdtHzHJAV0kk0n/MhM/Cd4kiIWbujEnCYlhdZjYhuNBtU+Ox6sPexA4JgKZVtZPQNmaKLkKfH2QW+zXhOhUnq82pyBcdLTazL7VqHS4ipgyw106z+qe/5MX++IFLW7BNXS+760gpfqoi5SGpJobJULRzrUzLtiPDg==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 26 Aug 2022 14:18:45 GMT; Max-Age=604800;
        Secure
      - bm_sz=7FD796B6B509866B7B82B1F6FEDFA8BA~YAAQkOEWAkKSF7GCAQAAlnx4thBjHSNFRcovjpPF1i3dDh/WiKcIttR67T7h8k5x/57fhoA8u+BELBc2J50UhjBDoh8XD2Os3cuaQ+8EkF5KCQD42vErmsXSgYEWlUHPPGjyp8sIcrefVz5UVOpC20eTkK2FpKgoEntdkUTJFLG0mkYCcCuMOYarKNvOrLdSeyyHl81B8kOJrEuD8DdM7NRsdUO5/FI6zf+I4ow0xJOBHqizS02EWzLfRnVumvbQ+vsTJ0zd+UviFdn4YWu/hsxWoUHZdReIXTI2cxWTbofKFwFkt4AC4tBQ5yBLKbuIwotRYKiprmK0yNgHt/dPzAq0ePPJoqNNqvQhdiCM9K0kUZuAM5K2OUzNbqE=~3617072~3356230;
        Domain=.sony.com; Path=/; Expires=Fri, 19 Aug 2022 18:18:45 GMT; Max-Age=14400
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Fri, 19 Aug 2022 14:18:45 GMT
- request:
    method: post
    uri: https://ca.account.sony.com/api/authz/v3/oauth/token
    body:
      encoding: UTF-8
      string: client_id=<PSN_CLIENT_ID>&client_secret=&code=v3.6gserD&grant_type=authorization_code&redirect_uri=com.playstation.PlayStationApp%3A%2F%2Fredirect&scope=psn%3Amobile.v1+psn%3Aclientapp&token_format=jwt
    headers:
      User-Agent:
      - Faraday v2.2.0
      Content-Type:
      - application/x-www-form-urlencoded
      Authorization:
      - Basic <PSN_BASIC>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Content-Type:
      - application/json;charset=UTF-8
      X-Psn-Request-Id:
      - 5a9b3ec60af14d9a1bbdf0420acffe2c
      X-Psn-Correlation-Id:
      - c6dff3b3-b1f1-42a2-9e0c-f3e722469630
      X-Requestid:
      - 5a9b3ec60af14d9a1bbdf0420acffe2c
      X-Correlationid:
      - c6dff3b3-b1f1-42a2-9e0c-f3e722469630
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-store
      Content-Length:
      - '3619'
      Date:
      - Fri, 19 Aug 2022 14:18:46 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=3065E54881E1CFBB576BF896AA253417~-1~YAAQkOEWAmaSF7GCAQAAOH54tggu4mjB0xQPh9mndrKabTTqYndM8UBCrSCSniw8wY3Qt5yaEkrDzEKwk3dxdN7MRLgFKtC4rEcdAL9RN/sKYb/47z7zjvcpDhdY/cYXANvxyiAAVmZxuF7Na/4HF58UH1WZXxs7v0310yR/69PlzWJcjbWDqoZLqxQFARXE2ysUtDXG3lEVQ1ZkvEv+XHvoalqMudE7XYuj+7p2MlvSkP0DU/XJ/dABwp4kujRhWEfq7C51NCoNE3dS/NaYg5eGLasFfXw65XNcgefwO8okci75dTw60vBYqVty7yy3h6a8xPulXPegqPXoQNytuyIsvX7PT1NkR2xYXw==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 26 Aug 2022 14:18:46 GMT; Max-Age=604800;
        Secure
      - bm_sz=15F5D929F14AA490090F405BAABE4148~YAAQkOEWAmeSF7GCAQAAOH54thBLPlbqY/qczWUGtVQJBLfdr2e1EbyAzEcydF7+3gSMkOF2kMx3oEPkQa2eER1ss/3TE3O6s7N0xbfXoG6meVtyUCHUBdbbyFogrOLQTL/38pp3MSqnIGzG+FOEp8Oi2vbB3/7lPLrrE5Rzr9oaAJcMJVB5Db3qVfYfsND4spgsYJ/n+bCjW8tHAybiELUXXt9ltXyDdPVLER/ziC09eum4s8efTkujPz9+nAPw1WLE2reNTHGwWwKz54Eg8T5AE1IERYNnnEc5hHwQXTgVVMM3iVfGbIcJyw/HEdo5Abgn9dSXDyfa32XFS6XT+ixF+mcZxYj4D9ayYdl8jNPwN8+VQlCey9nXsLY=~3617072~3356230;
        Domain=.sony.com; Path=/; Expires=Fri, 19 Aug 2022 18:18:45 GMT; Max-Age=14399
    body:
      encoding: UTF-8
      string: '{"access_token":"accesstoken","token_type":"bearer","expires_in":3599,"scope":"psn:mobile.v1
        psn:clientapp","id_token":"idtoken","refresh_token":"refreshtoken","refresh_token_expires_in":5183999}'
  recorded_at: Fri, 19 Aug 2022 14:18:45 GMT
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer <PSN_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '148'
      Server:
      - Apache
      Cache-Control:
      - private
      Date:
      - Fri, 19 Aug 2022 14:18:46 GMT
      Connection:
      - keep-alive
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"accountId":"6588603711421927529","trophyLevel":416,"progress":37,"tier":5,"earnedTrophies":{"bronze":4404,"silver":1324,"gold":463,"platinum":82}}'
  recorded_at: Fri, 19 Aug 2022 14:18:46 GMT
recorded_with: VCR 6.1.0
