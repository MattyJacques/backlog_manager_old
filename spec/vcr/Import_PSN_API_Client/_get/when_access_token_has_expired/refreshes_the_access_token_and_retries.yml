---
http_interactions:
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer fake_expired_token
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '105'
      Server:
      - Apache
      Date:
      - Fri, 27 Jan 2023 13:44:29 GMT
      Connection:
      - keep-alive
      Www-Authenticate:
      - Bearer realm="PSN"
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"error":{"referenceId":"b8c5ade2-9e48-11ed-a2ed-5dd393ad1e39","code":2241025,"message":"Invalid
        token"}}'
  recorded_at: Fri, 27 Jan 2023 13:44:28 GMT
- request:
    method: get
    uri: https://ca.account.sony.com/api/authz/v3/oauth/authorize?access_type=offline&client_id=<PSN_CLIENT_ID>&redirect_uri=com.scee.psxandroid.scecompcall://redirect&response_type=code&scope=psn:mobile.v2.core%20psn:clientapp
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Cookie:
      - npsso=<PSN_NPSSO>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 302
      message: Moved Temporarily
    headers:
      Server:
      - nginx
      Content-Length:
      - '0'
      X-Psn-Request-Id:
      - 2b8a05a8bdd6cf62a1a611e1e9de4010
      X-Psn-Correlation-Id:
      - e9a698cb-303c-43d0-94b3-5b677ead0db6
      X-Requestid:
      - 2b8a05a8bdd6cf62a1a611e1e9de4010
      X-Correlationid:
      - e9a698cb-303c-43d0-94b3-5b677ead0db6
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-cache, no-store, max-age=0, must-revalidate
      Expires:
      - '0'
      Location:
      - com.scee.psxandroid.scecompcall://redirect/?code=v1.Ab23CD&cid=e9a698cb-303c-43d0-94b3-5b677ead0db6
      Strict-Transport-Security:
      - max-age=31536000 ; includeSubDomains
      X-Xss-Protection:
      - 1; mode=block
      X-Frame-Options:
      - DENY
      Date:
      - Fri, 27 Jan 2023 13:44:29 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=ECA6631540FE03514CF3309B71708426~-1~YAAQl7D3SG8++NGFAQAAF/l48wn622T4SNjpjsadXLkHjnVuI1irdw9L1S9VBaWTZN773EcbmjHqMbsq97vZbOOPh7WHgfAGthZp/ic1/VH+Gvuox2Q4gLCNwF2OPWBrQxJ52sPrTJjjRRAA9OVDRbZrbpl+MRSDBxRvQeXH2TDjLDhzYaqDgrpgkza0Oo7+5ub0MvCfanFZwdY8meC02OSJfkah/slBB9goL5HjzBn2J8wCe9uNTqNnicI1rCYwlIy0WaXi71pRxrPwwi9XAL+ZaMB2RyxTBNEnTNlRtWwNiJBrskYSJ61z5zIli83gA6ZzVaFC6Dr57Tdw5g0wquhYOSRm2XJP/Kn/fCpuQX9uE1C3nCpvEX9ByLa2NwrT1iFbAYrwAvuGFXTmOQ==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 03 Feb 2023 13:44:29 GMT; Max-Age=604800;
        Secure
      - bm_sz=4E41475FB0A01A66FE1FF5EB867A6DAB~YAAQl7D3SHA++NGFAQAAF/l48xINqDQiyBDWqPWzeq4mdDKdHoaXCRGBcd0Z4rztLr2Gk68zrNBuQ6wEruK+yoeo8g2oeG4+lwvVd+qFLSAKMbYgTEOPfNr+hoUCk6OvmF0JZp9jF9P4Drlw8k8mwUWabJLOX6t4KsjoHoLlD8aQtXkgGVv9reh01mepRxOJbYyXh1wyrz6y2hJosDLxo+mKQ6aZnFbeK64nPDB5gxZgc1iVwqcGXvaQdkEK+BJieqP/yfsccGmob3qRixtOMfstTFsVo3nn9J+2quEYWoIre56t0Z1h1FVnXgRpz6F1X0Ngny330BcPRTfEJRrBItcz7lnNLuYUmXlDqRUrIt42O3E4GiVzBqOnOPs=~4474160~3424565;
        Domain=.sony.com; Path=/; Expires=Fri, 27 Jan 2023 17:44:29 GMT; Max-Age=14400
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Fri, 27 Jan 2023 13:44:28 GMT
- request:
    method: post
    uri: https://ca.account.sony.com/api/authz/v3/oauth/token
    body:
      encoding: UTF-8
      string: code=v3.I8XWuK&grant_type=authorization_code&redirect_uri=com.scee.psxandroid.scecompcall%3A%2F%2Fredirect&token_format=jwt
    headers:
      User-Agent:
      - Faraday v2.5.2
      Content-Type:
      - application/x-www-form-urlencoded
      Authorization:
      - Basic <PSN_BASIC>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Content-Type:
      - application/json;charset=UTF-8
      X-Psn-Request-Id:
      - 49a0bcb6e10960c430d5c62a26dd21a1
      X-Psn-Correlation-Id:
      - d0b47b2b-397f-4edb-b17f-1035455578bc
      X-Requestid:
      - 49a0bcb6e10960c430d5c62a26dd21a1
      X-Correlationid:
      - d0b47b2b-397f-4edb-b17f-1035455578bc
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-store
      Content-Length:
      - '3696'
      Date:
      - Fri, 27 Jan 2023 13:44:30 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=2D4150CDC301C0692350FF37C63C0F3E~-1~YAAQl7D3SIE++NGFAQAAhfp48wmBlQI3rVLvJ4UVTagp9SoUE064n8qYuZK2xkNkmi0NUuRWZMEPPNYY68+xPCbfT+wijGjWwyE5xjRnfz8b1tq8wN7cSSrmdxvnnboEX9gEu4j6OfIMKwDXZQGygF6JHReOA+ctxLNwA4TWHhegJTht/MTB8lDhY/tzPItgiMcG1jVbH89cPi8+WDX+jUCdu7Q4tgDKjsc0kvtuu9lrLw1Y4Imjmr+RdXd3TDqzJ9o6ToJSEYE6VafzSf0FXlDS92wjfVh+rh53xOgefZjk3X8B7u/mdTC3b1fCLeE3HirnkZ8MxzvOgeKvvG5w6qlKAx15558S6Xcp8IDRrodjejwBGUHk14mJN+ll9HOjrWH6M1JEgiuCLglPBQ==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 03 Feb 2023 13:44:30 GMT; Max-Age=604800;
        Secure
      - bm_sz=8A762290048D760545B04B921A4CC306~YAAQl7D3SII++NGFAQAAhfp48xLAh2McnnFgSjgVBxi3Cr/nlzj2FUdz/wsNldCbnUH4ouY1n/odO/ATZQKEm/QOC0ed+Qr2d8nxLS7brsJ+Ee8oPZbCF4vM2MWkc46G3t9CB4ti2PiM1ChJNm/OOXli5ijGGtUBpo4qhNkUYCAScCPWOGMfjLfV8zuFmURGR+3xitnarbpfDeYpDY/uP5/G+pOp09uSiWsoVD3Iq4X4g3Ugu+dliCCgAhQeW+nUtiXj/EmI3cOr2rLV0gqMe1KbQw3O1DqGBrbGke6SIorzzlP+3MjkWWoXd7UsaIb09YFU4xLEaG7VuYJ8Zh8PZy1GFVupyKckLJ0OKIQmZn+khBAVm3WlIQtSwZk=~4474160~3424565;
        Domain=.sony.com; Path=/; Expires=Fri, 27 Jan 2023 17:44:29 GMT; Max-Age=14399
    body:
      encoding: UTF-8
      string: '{"access_token":"<PSN_TOKEN>","token_type":"bearer","expires_in":3599,"scope":"psn:mobile.v2.core
        psn:clientapp","id_token":"idtoken","refresh_token":"refreshtoken","refresh_token_expires_in":5183999}'
  recorded_at: Fri, 27 Jan 2023 13:44:29 GMT
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer <PSN_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '148'
      Server:
      - Apache
      Cache-Control:
      - private
      Date:
      - Fri, 27 Jan 2023 13:44:30 GMT
      Connection:
      - keep-alive
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"accountId":"1934325343656948326","trophyLevel":411,"progress":40,"tier":5,"earnedTrophies":{"bronze":4078,"silver":1333,"gold":433,"platinum":84}}'
  recorded_at: Fri, 27 Jan 2023 13:44:29 GMT
recorded_with: VCR 6.1.0
