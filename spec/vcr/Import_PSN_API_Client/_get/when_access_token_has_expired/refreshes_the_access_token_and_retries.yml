---
http_interactions:
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer fake_expired_token
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '105'
      Server:
      - Apache
      Date:
      - Fri, 20 Jan 2023 22:56:40 GMT
      Connection:
      - keep-alive
      Www-Authenticate:
      - Bearer realm="PSN"
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"error":{"referenceId":"b3b1f331-9915-11ed-9925-0f42a516664c","code":2241025,"message":"Invalid
        token"}}'
  recorded_at: Fri, 20 Jan 2023 22:56:38 GMT
- request:
    method: get
    uri: https://ca.account.sony.com/api/authz/v3/oauth/authorize?access_type=offline&client_id=<PSN_CLIENT_ID>&redirect_uri=com.scee.psxandroid.scecompcall://redirect&response_type=code&scope=psn:mobile.v2.core%20psn:clientapp
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Cookie:
      - npsso=<PSN_NPSSO>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 302
      message: Moved Temporarily
    headers:
      Server:
      - nginx
      Content-Length:
      - '0'
      X-Psn-Request-Id:
      - 3c492f5d99913f380c38e6e5995c3b43
      X-Psn-Correlation-Id:
      - 6ce39981-8ef7-44e2-9b39-3cab01ed8192
      X-Requestid:
      - 3c492f5d99913f380c38e6e5995c3b43
      X-Correlationid:
      - 6ce39981-8ef7-44e2-9b39-3cab01ed8192
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-cache, no-store, max-age=0, must-revalidate
      Expires:
      - '0'
      Location:
      - com.scee.psxandroid.scecompcall://redirect/?code=v1.Ab23CD&cid=6ce39981-8ef7-44e2-9b39-3cab01ed8192
      Strict-Transport-Security:
      - max-age=31536000 ; includeSubDomains
      X-Xss-Protection:
      - 1; mode=block
      X-Frame-Options:
      - DENY
      Date:
      - Fri, 20 Jan 2023 22:56:41 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=0AD0B5FD5073658362E42BAF7EB16F9A~-1~YAAQl7D3SBQyYM+FAQAARwFm0QlC+IaLM0mjSa4CnwXACoyjTSQW05gZ2a4SlDjbRC895y6l6onLG3OJ08PuVLrq+HEGRS4BREHsnQ6DTTuLWLgGaIdVgk+IJJcs9nCqbI/mZALsZRyIE7WQVEP0eGmw/oUIYylv1rvzsIf4Dh8p6G2EwfAJPwBaOtCQjze53okrNrrrvAqqr3G5hOvg1t8//EdsSqVjU7eCyHuE2KF8agyPs1DHO8YJ+3hb25uT3AKhEO/5vnwC+JovrBGIVbTrgMGnVzXlMlMrIiCO+KLU4MdeLYf9nfDwIlxB865elKWSNGUgag9ZDwHYyntfLsn9pbWIiLKW09WHG+O6J7nsp3U0uZA64Nnb7Lw+OLKZbXYPnnx+GcVcU3ZFBQ==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 27 Jan 2023 22:56:41 GMT; Max-Age=604800;
        Secure
      - bm_sz=39CDF2046BB3C9546CE9978956F30383~YAAQl7D3SBUyYM+FAQAARwFm0RLf9iKHueQBpGk7KnocBBAfxnnERoBGJoHGCL3qqwRUbDO69zZeVsxMwxkMsvDfAMTolE0t8MObaIWKhbaiWbhG3nbdaR8XtSyZK9OwalmeCTy48qVngdhCoctnz2clqCcFjk/leJqNo8FzZZJNM+9jJhpVaBTOTgZkbj9W2kDSSdFzbDAfxL5UpmtMCT0BzLSjYxdAU+E4l8SbUEDtIGqkRDs6hS4Cma1nDSvZz49kbfRxUZzFJvEz3e/cleaJsnYW3Zl7s2SxotEDXcXngPYG58QlIijzwPSj2tCIun75VlH3HPOI5ZeZlrNtTbi2QfJo1HWi0yi/u8bnjRUeEjFAo3asNliDSdg=~3356214~4535605;
        Domain=.sony.com; Path=/; Expires=Sat, 21 Jan 2023 02:56:41 GMT; Max-Age=14400
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Fri, 20 Jan 2023 22:56:39 GMT
- request:
    method: post
    uri: https://ca.account.sony.com/api/authz/v3/oauth/token
    body:
      encoding: UTF-8
      string: code=v3.3tkJ0p&grant_type=authorization_code&redirect_uri=com.scee.psxandroid.scecompcall%3A%2F%2Fredirect&token_format=jwt
    headers:
      User-Agent:
      - Faraday v2.5.2
      Content-Type:
      - application/x-www-form-urlencoded
      Authorization:
      - Basic <PSN_BASIC>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - nginx
      Content-Type:
      - application/json;charset=UTF-8
      X-Psn-Request-Id:
      - d5a33040c396cf8d22236d560b7f61e2
      X-Psn-Correlation-Id:
      - 2d3802d6-88ea-48d1-b2b9-9cdea5365a57
      X-Requestid:
      - d5a33040c396cf8d22236d560b7f61e2
      X-Correlationid:
      - 2d3802d6-88ea-48d1-b2b9-9cdea5365a57
      X-Content-Type-Options:
      - nosniff
      Cache-Control:
      - no-store
      Content-Length:
      - '3696'
      Date:
      - Fri, 20 Jan 2023 22:56:41 GMT
      Connection:
      - keep-alive
      Set-Cookie:
      - _abck=91DF7986E504858CB56F17CC4C73AD33~-1~YAAQl7D3SEIyYM+FAQAApgNm0QmZybEaoMGHxHB9T/8Knw++vlpXh1I29adlGwO9kv7z1Mck8k2WT35R27Yd/adoGG1L0+P6cFl+tia8/91tD1i9M2eQHd5HZ7M0Dh9kbh6itgBGVst1hp1qV4ODn1cI3ryezFVdPwuEMKMtQDm5aEaUZBxenIBpV+TGfJ6SbXFfK5Se71TW6X3HE7zcSWYqyOgk/jybaMTZjLzHZeq1Zv1Mu41BwYcd72RohPruHGca1aJvqNI4PGYFbLOSIGup9CeQSwr3+EmIuBj/qpUEQ+BXNSM1uwi+eUSyDQUxWDqyv5bdv4QegCAY4GNOIEJMYnUCvTMj/Nt8ya2IWYfocu/EUa6tL3RiU1MCd3xXvrhK9/IKx1Af6Ki1yQ==~-1~-1~-1;
        Domain=.sony.com; Path=/; Expires=Fri, 27 Jan 2023 22:56:41 GMT; Max-Age=604800;
        Secure
      - bm_sz=5904C93968909D75254CACA74D8C84CD~YAAQl7D3SEMyYM+FAQAApgNm0RLU7oLDLRnRrf1W4bLBUVIEtcQEN1DdtkvmirnlitqLZOxO/o4JuJNxLcLEYv91mHnQHdtWflk3U4mWB1YNCLyIOR7DmnE96GZ4M7nVHGaUJyOqs5G5JbBPWh+6joGYBUnERXvr9EBsygsd8mKLskOfM+ym4KPms4GJe9Jm9u2qK1yhKP8pB5wSh5KF2cjxTYxGEN9rOV314c5BZTACk7K2QI8FmqmZ47Xsbjr+2IZfANH99znigM9/KnzMuI8mfa2ZmtieVWch97BGDDlA6zpkHgCqEW3cGND1TB/Pal3mNAopAad/JLH/B1icGh/lbS4KIwByx0b3BZgc+xAGmU6/Wkye2pfJsgQ=~3356214~4535605;
        Domain=.sony.com; Path=/; Expires=Sat, 21 Jan 2023 02:56:41 GMT; Max-Age=14400
    body:
      encoding: UTF-8
      string: '{"access_token":"accesstoken","token_type":"bearer","expires_in":3599,"scope":"psn:mobile.v2.core
        psn:clientapp","id_token":"idtoken","refresh_token":"refreshtoken","refresh_token_expires_in":5183999}'
  recorded_at: Fri, 20 Jan 2023 22:56:39 GMT
- request:
    method: get
    uri: https://ps5.np.playstation.net/api/trophy/v1/users/me/trophySummary
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Authorization:
      - Bearer <PSN_TOKEN>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '147'
      Server:
      - Apache
      Cache-Control:
      - private
      Date:
      - Fri, 20 Jan 2023 22:56:42 GMT
      Connection:
      - keep-alive
      Strict-Transport-Security:
      - max-age=63072000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"accountId":"1934325343656948326","trophyLevel":410,"progress":0,"tier":5,"earnedTrophies":{"bronze":4070,"silver":1316,"gold":429,"platinum":81}}'
  recorded_at: Fri, 20 Jan 2023 22:56:40 GMT
recorded_with: VCR 6.1.0
